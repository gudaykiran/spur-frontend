import { c as create_ssr_component, d as createEventDispatcher, e as escape, f as add_attribute, h as each, v as validate_component } from "../../chunks/ssr.js";
const css$3 = {
  code: ".message-wrapper.svelte-rst4pb.svelte-rst4pb{display:flex;gap:10px;align-items:flex-start}.message-wrapper.user.svelte-rst4pb.svelte-rst4pb{justify-content:flex-end}.message-wrapper.ai.svelte-rst4pb.svelte-rst4pb{justify-content:flex-start}.message-avatar.svelte-rst4pb.svelte-rst4pb{width:32px;height:32px;min-width:32px;border-radius:50%;background:linear-gradient(135deg, #6366f1, #8b5cf6);color:white;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px;box-shadow:0 1px 2px rgba(0, 0, 0, 0.1)}.message-content.svelte-rst4pb.svelte-rst4pb{display:flex;flex-direction:column;gap:6px;max-width:65%;min-width:120px}.message-meta.svelte-rst4pb.svelte-rst4pb{display:flex;align-items:center;gap:12px;padding:0 4px}.message-time.svelte-rst4pb.svelte-rst4pb{font-size:12px;color:var(--color-text-secondary)}.message-actions.svelte-rst4pb.svelte-rst4pb{display:flex;gap:4px;opacity:0;transition:opacity 0.2s}.message-wrapper.svelte-rst4pb:hover .message-actions.svelte-rst4pb{opacity:1}.action-btn.svelte-rst4pb.svelte-rst4pb{background:transparent;border:none;padding:6px;border-radius:6px;cursor:pointer;color:var(--color-text-secondary);display:flex;align-items:center;justify-content:center;transition:all 0.2s}.action-btn.svelte-rst4pb.svelte-rst4pb:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.action-btn.active.svelte-rst4pb.svelte-rst4pb{color:#6366f1}.message-bubble{padding:14px 18px;border-radius:var(--radius-md);line-height:1.6;font-size:15px;animation:svelte-rst4pb-fadeIn 0.3s ease-out;width:100%}@keyframes svelte-rst4pb-fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message-bubble.user{background-color:var(--color-user-bg);color:var(--color-user-text);border-radius:16px 16px 4px 16px;box-shadow:0 2px 8px rgba(99, 102, 241, 0.15);word-break:break-word;overflow-wrap:break-word;white-space:pre-wrap;max-width:100%}.message-bubble.ai{background-color:var(--color-ai-bg);color:var(--color-ai-text);border:1px solid var(--color-border);border-radius:16px 16px 16px 4px;box-shadow:0 1px 3px rgba(0, 0, 0, 0.05);word-break:break-word;overflow-wrap:break-word;white-space:pre-wrap;max-width:100%}.message-bubble.ai strong{font-weight:600;color:#1a1a1a}.message-bubble.ai a{color:#6366f1;text-decoration:none;border-bottom:1px solid #6366f1;transition:all 0.2s}.message-bubble.ai a:hover{color:#4f46e5;border-bottom-color:#4f46e5}.message-bubble.error{background-color:var(--color-error-bg);color:var(--color-error)}",
  map: '{"version":3,"file":"MessageBubble.svelte","sources":["MessageBubble.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { createEventDispatcher } from \\"svelte\\";\\nexport let sender;\\nexport let text;\\nexport let timestamp;\\nexport let messageId;\\nconst dispatch = createEventDispatcher();\\nconst isError = text.includes(\\"error\\") || text.includes(\\"failed\\");\\nlet liked = null;\\nlet copied = false;\\nfunction formatText(str) {\\n  let formatted = str;\\n  formatted = formatted.replace(/\\\\*\\\\*(.+?)\\\\*\\\\*/g, \\"<strong>$1</strong>\\");\\n  formatted = formatted.replace(\\n    /(https?:\\\\/\\\\/[^\\\\s]+)/g,\\n    \'<a href=\\"$1\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">$1</a>\'\\n  );\\n  formatted = formatted.replace(/^[â€¢\\\\-\\\\*]\\\\s/gm, \\"\\\\u2022 \\");\\n  formatted = formatted.replace(/\\\\n/g, \\"<br>\\");\\n  return formatted;\\n}\\nfunction formatTime(ts) {\\n  const date = new Date(ts);\\n  const hours = date.getHours().toString().padStart(2, \\"0\\");\\n  const minutes = date.getMinutes().toString().padStart(2, \\"0\\");\\n  return `${hours}:${minutes}`;\\n}\\nasync function handleCopy() {\\n  try {\\n    await navigator.clipboard.writeText(text);\\n    copied = true;\\n    setTimeout(() => copied = false, 2e3);\\n  } catch (err) {\\n    console.error(\\"Failed to copy:\\", err);\\n  }\\n}\\nfunction handleLike() {\\n  liked = liked === true ? null : true;\\n}\\nfunction handleDislike() {\\n  liked = liked === false ? null : false;\\n}\\nfunction handleRegenerate() {\\n  dispatch(\\"regenerate\\", { messageId });\\n}\\nconst formattedText = formatText(text);\\n<\/script>\\r\\n\\r\\n<div\\r\\n  class=\\"message-wrapper\\"\\r\\n  class:user={sender === \\"user\\"}\\r\\n  class:ai={sender === \\"ai\\"}\\r\\n>\\r\\n  {#if sender === \\"ai\\"}\\r\\n    <div class=\\"message-avatar\\">C</div>\\r\\n  {/if}\\r\\n  <div class=\\"message-content\\">\\r\\n    <div\\r\\n      class=\\"message-bubble\\"\\r\\n      class:user={sender === \\"user\\"}\\r\\n      class:ai={sender === \\"ai\\"}\\r\\n      class:error={sender === \\"ai\\" && isError}\\r\\n    >\\r\\n      {@html formattedText}\\r\\n    </div>\\r\\n    <div class=\\"message-meta\\">\\r\\n      <span class=\\"message-time\\">{formatTime(timestamp)}</span>\\r\\n      <div class=\\"message-actions\\">\\r\\n        <button class=\\"action-btn\\" on:click={handleCopy} title=\\"Copy message\\">\\r\\n          {#if copied}\\r\\n            <svg\\r\\n              width=\\"16\\"\\r\\n              height=\\"16\\"\\r\\n              viewBox=\\"0 0 24 24\\"\\r\\n              fill=\\"none\\"\\r\\n              stroke=\\"currentColor\\"\\r\\n            >\\r\\n              <path\\r\\n                d=\\"M20 6L9 17l-5-5\\"\\r\\n                stroke-width=\\"2\\"\\r\\n                stroke-linecap=\\"round\\"\\r\\n                stroke-linejoin=\\"round\\"\\r\\n              />\\r\\n            </svg>\\r\\n          {:else}\\r\\n            <svg\\r\\n              width=\\"16\\"\\r\\n              height=\\"16\\"\\r\\n              viewBox=\\"0 0 24 24\\"\\r\\n              fill=\\"none\\"\\r\\n              stroke=\\"currentColor\\"\\r\\n            >\\r\\n              <rect\\r\\n                x=\\"9\\"\\r\\n                y=\\"9\\"\\r\\n                width=\\"13\\"\\r\\n                height=\\"13\\"\\r\\n                rx=\\"2\\"\\r\\n                ry=\\"2\\"\\r\\n                stroke-width=\\"2\\"\\r\\n              />\\r\\n              <path\\r\\n                d=\\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\\"\\r\\n                stroke-width=\\"2\\"\\r\\n              />\\r\\n            </svg>\\r\\n          {/if}\\r\\n        </button>\\r\\n        {#if sender === \\"ai\\"}\\r\\n          <button\\r\\n            class=\\"action-btn\\"\\r\\n            class:active={liked === true}\\r\\n            on:click={handleLike}\\r\\n            title=\\"Like\\"\\r\\n          >\\r\\n            <svg\\r\\n              width=\\"16\\"\\r\\n              height=\\"16\\"\\r\\n              viewBox=\\"0 0 24 24\\"\\r\\n              fill={liked === true ? \\"currentColor\\" : \\"none\\"}\\r\\n              stroke=\\"currentColor\\"\\r\\n            >\\r\\n              <path\\r\\n                d=\\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\\"\\r\\n                stroke-width=\\"2\\"\\r\\n                stroke-linecap=\\"round\\"\\r\\n                stroke-linejoin=\\"round\\"\\r\\n              />\\r\\n            </svg>\\r\\n          </button>\\r\\n          <button\\r\\n            class=\\"action-btn\\"\\r\\n            class:active={liked === false}\\r\\n            on:click={handleDislike}\\r\\n            title=\\"Dislike\\"\\r\\n          >\\r\\n            <svg\\r\\n              width=\\"16\\"\\r\\n              height=\\"16\\"\\r\\n              viewBox=\\"0 0 24 24\\"\\r\\n              fill={liked === false ? \\"currentColor\\" : \\"none\\"}\\r\\n              stroke=\\"currentColor\\"\\r\\n            >\\r\\n              <path\\r\\n                d=\\"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17\\"\\r\\n                stroke-width=\\"2\\"\\r\\n                stroke-linecap=\\"round\\"\\r\\n                stroke-linejoin=\\"round\\"\\r\\n              />\\r\\n            </svg>\\r\\n          </button>\\r\\n          <button\\r\\n            class=\\"action-btn\\"\\r\\n            on:click={handleRegenerate}\\r\\n            title=\\"Regenerate response\\"\\r\\n          >\\r\\n            <svg\\r\\n              width=\\"16\\"\\r\\n              height=\\"16\\"\\r\\n              viewBox=\\"0 0 24 24\\"\\r\\n              fill=\\"none\\"\\r\\n              stroke=\\"currentColor\\"\\r\\n            >\\r\\n              <path\\r\\n                d=\\"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2\\"\\r\\n                stroke-width=\\"2\\"\\r\\n                stroke-linecap=\\"round\\"\\r\\n                stroke-linejoin=\\"round\\"\\r\\n              />\\r\\n            </svg>\\r\\n          </button>\\r\\n        {/if}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n  .message-wrapper {\\r\\n    display: flex;\\r\\n    gap: 10px;\\r\\n    align-items: flex-start;\\r\\n  }\\r\\n\\r\\n  .message-wrapper.user {\\r\\n    justify-content: flex-end;\\r\\n  }\\r\\n\\r\\n  .message-wrapper.ai {\\r\\n    justify-content: flex-start;\\r\\n  }\\r\\n\\r\\n  .message-avatar {\\r\\n    width: 32px;\\r\\n    height: 32px;\\r\\n    min-width: 32px;\\r\\n    border-radius: 50%;\\r\\n    background: linear-gradient(135deg, #6366f1, #8b5cf6);\\r\\n    color: white;\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    font-weight: 600;\\r\\n    font-size: 14px;\\r\\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\\r\\n  }\\r\\n\\r\\n  .message-content {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    gap: 6px;\\r\\n    max-width: 65%;\\r\\n    min-width: 120px;\\r\\n  }\\r\\n\\r\\n  .message-meta {\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    gap: 12px;\\r\\n    padding: 0 4px;\\r\\n  }\\r\\n\\r\\n  .message-time {\\r\\n    font-size: 12px;\\r\\n    color: var(--color-text-secondary);\\r\\n  }\\r\\n\\r\\n  .message-actions {\\r\\n    display: flex;\\r\\n    gap: 4px;\\r\\n    opacity: 0;\\r\\n    transition: opacity 0.2s;\\r\\n  }\\r\\n\\r\\n  .message-wrapper:hover .message-actions {\\r\\n    opacity: 1;\\r\\n  }\\r\\n\\r\\n  .action-btn {\\r\\n    background: transparent;\\r\\n    border: none;\\r\\n    padding: 6px;\\r\\n    border-radius: 6px;\\r\\n    cursor: pointer;\\r\\n    color: var(--color-text-secondary);\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    transition: all 0.2s;\\r\\n  }\\r\\n\\r\\n  .action-btn:hover {\\r\\n    background: var(--color-bg-secondary);\\r\\n    color: var(--color-text-primary);\\r\\n  }\\r\\n\\r\\n  .action-btn.active {\\r\\n    color: #6366f1;\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble) {\\r\\n    padding: 14px 18px;\\r\\n    border-radius: var(--radius-md);\\r\\n    line-height: 1.6;\\r\\n    font-size: 15px;\\r\\n    animation: fadeIn 0.3s ease-out;\\r\\n    width: 100%;\\r\\n  }\\r\\n\\r\\n  @keyframes fadeIn {\\r\\n    from {\\r\\n      opacity: 0;\\r\\n      transform: translateY(10px);\\r\\n    }\\r\\n    to {\\r\\n      opacity: 1;\\r\\n      transform: translateY(0);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble.user) {\\r\\n    background-color: var(--color-user-bg);\\r\\n    color: var(--color-user-text);\\r\\n    border-radius: 16px 16px 4px 16px;\\r\\n    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.15);\\r\\n    word-break: break-word;\\r\\n    overflow-wrap: break-word;\\r\\n    white-space: pre-wrap;\\r\\n    max-width: 100%;\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble.ai) {\\r\\n    background-color: var(--color-ai-bg);\\r\\n    color: var(--color-ai-text);\\r\\n    border: 1px solid var(--color-border);\\r\\n    border-radius: 16px 16px 16px 4px;\\r\\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\\r\\n    word-break: break-word;\\r\\n    overflow-wrap: break-word;\\r\\n    white-space: pre-wrap;\\r\\n    max-width: 100%;\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble.ai strong) {\\r\\n    font-weight: 600;\\r\\n    color: #1a1a1a;\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble.ai a) {\\r\\n    color: #6366f1;\\r\\n    text-decoration: none;\\r\\n    border-bottom: 1px solid #6366f1;\\r\\n    transition: all 0.2s;\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble.ai a:hover) {\\r\\n    color: #4f46e5;\\r\\n    border-bottom-color: #4f46e5;\\r\\n  }\\r\\n\\r\\n  :global(.message-bubble.error) {\\r\\n    background-color: var(--color-error-bg);\\r\\n    color: var(--color-error);\\r\\n  }\\r\\n</style>\\r\\n"],"names":[],"mappings":"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"}'
};
function formatText(str) {
  let formatted = str;
  formatted = formatted.replace(/\*\*(.+?)\*\*/g, "<strong>$1</strong>");
  formatted = formatted.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>');
  formatted = formatted.replace(/^[â€¢\-\*]\s/gm, "â€¢ ");
  formatted = formatted.replace(/\n/g, "<br>");
  return formatted;
}
function formatTime(ts) {
  const date = new Date(ts);
  const hours = date.getHours().toString().padStart(2, "0");
  const minutes = date.getMinutes().toString().padStart(2, "0");
  return `${hours}:${minutes}`;
}
const MessageBubble = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { sender } = $$props;
  let { text } = $$props;
  let { timestamp } = $$props;
  let { messageId } = $$props;
  createEventDispatcher();
  const isError = text.includes("error") || text.includes("failed");
  const formattedText = formatText(text);
  if ($$props.sender === void 0 && $$bindings.sender && sender !== void 0) $$bindings.sender(sender);
  if ($$props.text === void 0 && $$bindings.text && text !== void 0) $$bindings.text(text);
  if ($$props.timestamp === void 0 && $$bindings.timestamp && timestamp !== void 0) $$bindings.timestamp(timestamp);
  if ($$props.messageId === void 0 && $$bindings.messageId && messageId !== void 0) $$bindings.messageId(messageId);
  $$result.css.add(css$3);
  return `<div class="${[
    "message-wrapper svelte-rst4pb",
    (sender === "user" ? "user" : "") + " " + (sender === "ai" ? "ai" : "")
  ].join(" ").trim()}">${sender === "ai" ? `<div class="message-avatar svelte-rst4pb" data-svelte-h="svelte-d53kqd">C</div>` : ``} <div class="message-content svelte-rst4pb"><div class="${[
    "message-bubble",
    (sender === "user" ? "user" : "") + " " + (sender === "ai" ? "ai" : "") + " " + (sender === "ai" && isError ? "error" : "")
  ].join(" ").trim()}"><!-- HTML_TAG_START -->${formattedText}<!-- HTML_TAG_END --></div> <div class="message-meta svelte-rst4pb"><span class="message-time svelte-rst4pb">${escape(formatTime(timestamp))}</span> <div class="message-actions svelte-rst4pb"><button class="action-btn svelte-rst4pb" title="Copy message">${`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-width="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-width="2"></path></svg>`}</button> ${sender === "ai" ? `<button class="${["action-btn svelte-rst4pb", ""].join(" ").trim()}" title="Like"><svg width="16" height="16" viewBox="0 0 24 24"${add_attribute("fill", "none", 0)} stroke="currentColor"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="${["action-btn svelte-rst4pb", ""].join(" ").trim()}" title="Dislike"><svg width="16" height="16" viewBox="0 0 24 24"${add_attribute("fill", "none", 0)} stroke="currentColor"><path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="action-btn svelte-rst4pb" title="Regenerate response" data-svelte-h="svelte-1d9951e"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>` : ``}</div></div></div> </div>`;
});
const css$2 = {
  code: '.chat-body{flex:1;overflow-y:auto;overflow-x:hidden;padding:var(--spacing-xl);display:flex;flex-direction:column;gap:var(--spacing-lg);scroll-behavior:smooth}.chat-body::-webkit-scrollbar{width:10px}.chat-body::-webkit-scrollbar-track{background:#f0f0f0;border-radius:10px}.chat-body::-webkit-scrollbar-thumb{background:#ccc;border-radius:10px}.chat-body::-webkit-scrollbar-thumb:hover{background:#999}.chat-body::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:var(--radius-md)}.chat-body::-webkit-scrollbar-thumb:hover{background:#9ca3af}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--color-text-secondary);font-size:var(--font-size-lg);text-align:center;padding:var(--spacing-xl);gap:var(--spacing-lg)}.empty-state::before{content:"ðŸ’¬";font-size:3rem;opacity:0.3}.message-group{display:flex;gap:var(--spacing-md);align-items:flex-end;animation:svelte-1lbi593-slideIn 0.3s ease-out}.message-group.user{justify-content:flex-end}.message-group.ai{justify-content:flex-start}@keyframes svelte-1lbi593-slideIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}',
  map: '{"version":3,"file":"MessageList.svelte","sources":["MessageList.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount, afterUpdate, createEventDispatcher } from \\"svelte\\";\\nimport MessageBubble from \\"./MessageBubble.svelte\\";\\nexport let messages = [];\\nconst dispatch = createEventDispatcher();\\nlet scrollContainer;\\nlet isUserScrolling = false;\\nfunction scrollToBottom() {\\n  if (scrollContainer && !isUserScrolling) {\\n    setTimeout(() => {\\n      scrollContainer.scrollTop = scrollContainer.scrollHeight;\\n    }, 50);\\n  }\\n}\\nfunction handleScroll() {\\n  if (scrollContainer) {\\n    const isAtBottom = scrollContainer.scrollHeight - scrollContainer.clientHeight - scrollContainer.scrollTop < 100;\\n    isUserScrolling = !isAtBottom;\\n  }\\n}\\nfunction handleRegenerate(event) {\\n  dispatch(\\"regenerate\\", event.detail);\\n}\\nonMount(() => {\\n  scrollToBottom();\\n});\\nafterUpdate(() => {\\n  scrollToBottom();\\n});\\n<\/script>\\r\\n\\r\\n<div class=\\"chat-body\\" bind:this={scrollContainer} on:scroll={handleScroll}>\\r\\n  {#if messages.length === 0}\\r\\n    <div class=\\"empty-state\\">\\r\\n      <p>Start a conversation by sending a message below.</p>\\r\\n    </div>\\r\\n  {:else}\\r\\n    {#each messages as message (message.id)}\\r\\n      <div class=\\"message-group {message.sender}\\">\\r\\n        <MessageBubble\\r\\n          sender={message.sender}\\r\\n          text={message.text}\\r\\n          timestamp={message.timestamp}\\r\\n          messageId={message.id}\\r\\n          on:regenerate={handleRegenerate}\\r\\n        />\\r\\n      </div>\\r\\n    {/each}\\r\\n  {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n  :global(.chat-body) {\\r\\n    flex: 1;\\r\\n    overflow-y: auto;\\r\\n    overflow-x: hidden;\\r\\n    padding: var(--spacing-xl);\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    gap: var(--spacing-lg);\\r\\n    scroll-behavior: smooth;\\r\\n  }\\r\\n\\r\\n  :global(.chat-body::-webkit-scrollbar) {\\r\\n    width: 10px;\\r\\n  }\\r\\n\\r\\n  :global(.chat-body::-webkit-scrollbar-track) {\\r\\n    background: #f0f0f0;\\r\\n    border-radius: 10px;\\r\\n  }\\r\\n\\r\\n  :global(.chat-body::-webkit-scrollbar-thumb) {\\r\\n    background: #ccc;\\r\\n    border-radius: 10px;\\r\\n  }\\r\\n\\r\\n  :global(.chat-body::-webkit-scrollbar-thumb:hover) {\\r\\n    background: #999;\\r\\n  }\\r\\n\\r\\n  :global(.chat-body::-webkit-scrollbar-thumb) {\\r\\n    background: #d1d5db;\\r\\n    border-radius: var(--radius-md);\\r\\n  }\\r\\n\\r\\n  :global(.chat-body::-webkit-scrollbar-thumb:hover) {\\r\\n    background: #9ca3af;\\r\\n  }\\r\\n\\r\\n  :global(.empty-state) {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    height: 100%;\\r\\n    color: var(--color-text-secondary);\\r\\n    font-size: var(--font-size-lg);\\r\\n    text-align: center;\\r\\n    padding: var(--spacing-xl);\\r\\n    gap: var(--spacing-lg);\\r\\n  }\\r\\n\\r\\n  :global(.empty-state)::before {\\r\\n    content: \\"ðŸ’¬\\";\\r\\n    font-size: 3rem;\\r\\n    opacity: 0.3;\\r\\n  }\\r\\n\\r\\n  :global(.message-group) {\\r\\n    display: flex;\\r\\n    gap: var(--spacing-md);\\r\\n    align-items: flex-end;\\r\\n    animation: slideIn 0.3s ease-out;\\r\\n  }\\r\\n\\r\\n  :global(.message-group.user) {\\r\\n    justify-content: flex-end;\\r\\n  }\\r\\n\\r\\n  :global(.message-group.ai) {\\r\\n    justify-content: flex-start;\\r\\n  }\\r\\n\\r\\n  @keyframes slideIn {\\r\\n    from {\\r\\n      opacity: 0;\\r\\n      transform: translateY(8px);\\r\\n    }\\r\\n    to {\\r\\n      opacity: 1;\\r\\n      transform: translateY(0);\\r\\n    }\\r\\n  }\\r\\n</style>\\r\\n"],"names":[],"mappings":"AAmDU,UAAY,CAClB,IAAI,CAAE,CAAC,CACP,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,IAAI,YAAY,CAAC,CAC1B,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI,YAAY,CAAC,CACtB,eAAe,CAAE,MACnB,CAEQ,6BAA+B,CACrC,KAAK,CAAE,IACT,CAEQ,mCAAqC,CAC3C,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,IACjB,CAEQ,mCAAqC,CAC3C,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IACjB,CAEQ,yCAA2C,CACjD,UAAU,CAAE,IACd,CAEQ,mCAAqC,CAC3C,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,IAAI,WAAW,CAChC,CAEQ,yCAA2C,CACjD,UAAU,CAAE,OACd,CAEQ,YAAc,CACpB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,sBAAsB,CAAC,CAClC,SAAS,CAAE,IAAI,cAAc,CAAC,CAC9B,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,IAAI,YAAY,CAAC,CAC1B,GAAG,CAAE,IAAI,YAAY,CACvB,CAEQ,YAAa,QAAS,CAC5B,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,GACX,CAEQ,cAAgB,CACtB,OAAO,CAAE,IAAI,CACb,GAAG,CAAE,IAAI,YAAY,CAAC,CACtB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,sBAAO,CAAC,IAAI,CAAC,QAC1B,CAEQ,mBAAqB,CAC3B,eAAe,CAAE,QACnB,CAEQ,iBAAmB,CACzB,eAAe,CAAE,UACnB,CAEA,WAAW,sBAAQ,CACjB,IAAK,CACH,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,GAAG,CAC3B,CACA,EAAG,CACD,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,CAAC,CACzB,CACF"}'
};
const MessageList = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { messages = [] } = $$props;
  createEventDispatcher();
  let scrollContainer;
  if ($$props.messages === void 0 && $$bindings.messages && messages !== void 0) $$bindings.messages(messages);
  $$result.css.add(css$2);
  return `<div class="chat-body"${add_attribute("this", scrollContainer, 0)}>${messages.length === 0 ? `<div class="empty-state" data-svelte-h="svelte-uba3ot"><p>Start a conversation by sending a message below.</p></div>` : `${each(messages, (message) => {
    return `<div class="${"message-group " + escape(message.sender, true)}">${validate_component(MessageBubble, "MessageBubble").$$render(
      $$result,
      {
        sender: message.sender,
        text: message.text,
        timestamp: message.timestamp,
        messageId: message.id
      },
      {},
      {}
    )} </div>`;
  })}`} </div>`;
});
const css$1 = {
  code: ".chat-input-wrapper{padding:var(--spacing-lg);border-top:1px solid var(--color-border);background:linear-gradient(\r\n      180deg,\r\n      var(--color-bg-secondary) 0%,\r\n      var(--color-bg-primary) 100%\r\n    );box-shadow:0 -1px 3px rgba(0, 0, 0, 0.05)}.chat-input-container{display:flex;gap:var(--spacing-md);align-items:flex-end}.chat-input-field{flex:1;padding:var(--spacing-md) var(--spacing-lg);border:1px solid var(--color-border);border-radius:var(--radius-lg);font-size:var(--font-size-base);font-family:inherit;color:var(--color-text-primary);background-color:var(--color-bg-primary);resize:none;max-height:120px;min-height:48px;transition:var(--transition-base);box-shadow:var(--shadow-sm);line-height:1.5;overflow-y:auto;overflow-x:hidden;word-break:break-word;overflow-wrap:break-word}.chat-input-field::placeholder{color:var(--color-text-secondary)}.chat-input-field:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59, 130, 246, 0.1),\r\n      var(--shadow-sm)}.chat-input-field:disabled{background-color:var(--color-bg-secondary);color:var(--color-text-secondary);cursor:not-allowed}.send-button{padding:var(--spacing-md) var(--spacing-xl);background:linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);color:white;border:none;border-radius:var(--radius-lg);font-size:var(--font-size-base);font-weight:600;cursor:pointer;transition:var(--transition-base);white-space:nowrap;box-shadow:var(--shadow-md)}.send-button:hover:not(:disabled){background:linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);transform:translateY(-2px);box-shadow:0 8px 12px rgba(59, 130, 246, 0.3)}.send-button:active:not(:disabled){transform:translateY(0)}.send-button:disabled{background:#e5e7eb;color:#9ca3af;cursor:not-allowed;box-shadow:var(--shadow-sm)}.char-count{font-size:var(--font-size-sm);color:var(--color-text-secondary);margin-top:var(--spacing-xs);text-align:right}.char-count.warning{color:#f59e0b;font-weight:500}.char-count.error{color:var(--color-error);font-weight:600}",
  map: '{"version":3,"file":"ChatInput.svelte","sources":["ChatInput.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { createEventDispatcher } from \\"svelte\\";\\nexport let disabled = false;\\nexport let CHARACTER_LIMIT = 1e3;\\nconst dispatch = createEventDispatcher();\\nlet inputValue = \\"\\";\\nlet inputElement;\\nfunction handleSubmit() {\\n  const trimmedValue = inputValue.trim();\\n  if (trimmedValue && !disabled && trimmedValue.length > 0) {\\n    dispatch(\\"send\\", trimmedValue);\\n    inputValue = \\"\\";\\n    if (inputElement) {\\n      inputElement.focus();\\n    }\\n  }\\n}\\nfunction handleKeydown(event) {\\n  if (event.key === \\"Enter\\" && !event.shiftKey && !disabled) {\\n    event.preventDefault();\\n    handleSubmit();\\n  }\\n}\\nfunction handleInput() {\\n  if (inputValue.length > CHARACTER_LIMIT) {\\n    inputValue = inputValue.slice(0, CHARACTER_LIMIT);\\n  }\\n}\\n$: canSubmit = inputValue.trim().length > 0 && !disabled;\\n$: charCount = inputValue.length;\\n$: isNearLimit = charCount > CHARACTER_LIMIT * 0.8;\\n<\/script>\\r\\n\\r\\n<div class=\\"chat-input-wrapper\\">\\r\\n  <div class=\\"chat-input-container\\">\\r\\n    <textarea\\r\\n      bind:this={inputElement}\\r\\n      bind:value={inputValue}\\r\\n      on:keydown={handleKeydown}\\r\\n      on:input={handleInput}\\r\\n      placeholder=\\"Type your message...\\"\\r\\n      maxlength={CHARACTER_LIMIT}\\r\\n      {disabled}\\r\\n      class=\\"chat-input-field\\"\\r\\n      rows=\\"1\\"\\r\\n      style=\\"width: 100%;\\"\\r\\n    />\\r\\n    <button\\r\\n      on:click={handleSubmit}\\r\\n      disabled={!canSubmit}\\r\\n      class=\\"send-button\\"\\r\\n      type=\\"button\\"\\r\\n    >\\r\\n      Send\\r\\n    </button>\\r\\n  </div>\\r\\n  {#if isNearLimit}\\r\\n    <div\\r\\n      class=\\"char-count\\"\\r\\n      class:warning={charCount > CHARACTER_LIMIT * 0.9}\\r\\n      class:error={charCount >= CHARACTER_LIMIT}\\r\\n    >\\r\\n      {charCount} / {CHARACTER_LIMIT}\\r\\n    </div>\\r\\n  {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n  :global(.chat-input-wrapper) {\\r\\n    padding: var(--spacing-lg);\\r\\n    border-top: 1px solid var(--color-border);\\r\\n    background: linear-gradient(\\r\\n      180deg,\\r\\n      var(--color-bg-secondary) 0%,\\r\\n      var(--color-bg-primary) 100%\\r\\n    );\\r\\n    box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);\\r\\n  }\\r\\n\\r\\n  :global(.chat-input-container) {\\r\\n    display: flex;\\r\\n    gap: var(--spacing-md);\\r\\n    align-items: flex-end;\\r\\n  }\\r\\n\\r\\n  :global(.chat-input-field) {\\r\\n    flex: 1;\\r\\n    padding: var(--spacing-md) var(--spacing-lg);\\r\\n    border: 1px solid var(--color-border);\\r\\n    border-radius: var(--radius-lg);\\r\\n    font-size: var(--font-size-base);\\r\\n    font-family: inherit;\\r\\n    color: var(--color-text-primary);\\r\\n    background-color: var(--color-bg-primary);\\r\\n    resize: none;\\r\\n    max-height: 120px;\\r\\n    min-height: 48px;\\r\\n    transition: var(--transition-base);\\r\\n    box-shadow: var(--shadow-sm);\\r\\n    line-height: 1.5;\\r\\n    overflow-y: auto;\\r\\n    overflow-x: hidden;\\r\\n    word-break: break-word;\\r\\n    overflow-wrap: break-word;\\r\\n  }\\r\\n\\r\\n  :global(.chat-input-field::placeholder) {\\r\\n    color: var(--color-text-secondary);\\r\\n  }\\r\\n\\r\\n  :global(.chat-input-field:focus) {\\r\\n    outline: none;\\r\\n    border-color: #3b82f6;\\r\\n    box-shadow:\\r\\n      0 0 0 3px rgba(59, 130, 246, 0.1),\\r\\n      var(--shadow-sm);\\r\\n  }\\r\\n\\r\\n  :global(.chat-input-field:disabled) {\\r\\n    background-color: var(--color-bg-secondary);\\r\\n    color: var(--color-text-secondary);\\r\\n    cursor: not-allowed;\\r\\n  }\\r\\n\\r\\n  :global(.send-button) {\\r\\n    padding: var(--spacing-md) var(--spacing-xl);\\r\\n    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\\r\\n    color: white;\\r\\n    border: none;\\r\\n    border-radius: var(--radius-lg);\\r\\n    font-size: var(--font-size-base);\\r\\n    font-weight: 600;\\r\\n    cursor: pointer;\\r\\n    transition: var(--transition-base);\\r\\n    white-space: nowrap;\\r\\n    box-shadow: var(--shadow-md);\\r\\n  }\\r\\n\\r\\n  :global(.send-button:hover:not(:disabled)) {\\r\\n    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\\r\\n    transform: translateY(-2px);\\r\\n    box-shadow: 0 8px 12px rgba(59, 130, 246, 0.3);\\r\\n  }\\r\\n\\r\\n  :global(.send-button:active:not(:disabled)) {\\r\\n    transform: translateY(0);\\r\\n  }\\r\\n\\r\\n  :global(.send-button:disabled) {\\r\\n    background: #e5e7eb;\\r\\n    color: #9ca3af;\\r\\n    cursor: not-allowed;\\r\\n    box-shadow: var(--shadow-sm);\\r\\n  }\\r\\n\\r\\n  :global(.char-count) {\\r\\n    font-size: var(--font-size-sm);\\r\\n    color: var(--color-text-secondary);\\r\\n    margin-top: var(--spacing-xs);\\r\\n    text-align: right;\\r\\n  }\\r\\n\\r\\n  :global(.char-count.warning) {\\r\\n    color: #f59e0b;\\r\\n    font-weight: 500;\\r\\n  }\\r\\n\\r\\n  :global(.char-count.error) {\\r\\n    color: var(--color-error);\\r\\n    font-weight: 600;\\r\\n  }\\r\\n</style>\\r\\n"],"names":[],"mappings":"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"}'
};
const ChatInput = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let canSubmit;
  let charCount;
  let isNearLimit;
  let { disabled = false } = $$props;
  let { CHARACTER_LIMIT: CHARACTER_LIMIT2 = 1e3 } = $$props;
  createEventDispatcher();
  let inputValue = "";
  let inputElement;
  if ($$props.disabled === void 0 && $$bindings.disabled && disabled !== void 0) $$bindings.disabled(disabled);
  if ($$props.CHARACTER_LIMIT === void 0 && $$bindings.CHARACTER_LIMIT && CHARACTER_LIMIT2 !== void 0) $$bindings.CHARACTER_LIMIT(CHARACTER_LIMIT2);
  $$result.css.add(css$1);
  canSubmit = inputValue.trim().length > 0 && !disabled;
  charCount = inputValue.length;
  isNearLimit = charCount > CHARACTER_LIMIT2 * 0.8;
  return `<div class="chat-input-wrapper"><div class="chat-input-container"><textarea placeholder="Type your message..."${add_attribute("maxlength", CHARACTER_LIMIT2, 0)} ${disabled ? "disabled" : ""} class="chat-input-field" rows="1" style="width: 100%;"${add_attribute("this", inputElement, 0)}>${escape("")}</textarea> <button ${!canSubmit ? "disabled" : ""} class="send-button" type="button">Send</button></div> ${isNearLimit ? `<div class="${[
    "char-count",
    (charCount > CHARACTER_LIMIT2 * 0.9 ? "warning" : "") + " " + (charCount >= CHARACTER_LIMIT2 ? "error" : "")
  ].join(" ").trim()}">${escape(charCount)} / ${escape(CHARACTER_LIMIT2)}</div>` : ``} </div>`;
});
const css = {
  code: "body{margin:0;padding:0;overflow:hidden}html{height:100%}#svelte{height:100%}",
  map: '{"version":3,"file":"ChatContainer.svelte","sources":["ChatContainer.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport MessageList from \\"./MessageList.svelte\\";\\nimport MessageBubble from \\"./MessageBubble.svelte\\";\\nimport ChatInput from \\"./ChatInput.svelte\\";\\nimport TypingIndicator from \\"./TypingIndicator.svelte\\";\\nimport \\"../styles/chat.css\\";\\nimport { fetchChatHistory, sendChatMessage } from \\"../services/chatApi\\";\\nlet messages = [];\\nlet isLoading = false;\\nlet sessionId = null;\\nlet error = null;\\nlet showMenu = false;\\nconst SESSION_STORAGE_KEY = \\"chat_session_id\\";\\nconst CHARACTER_LIMIT = 1e3;\\nconst suggestedQuestions = [\\n  \\"What are your shipping options?\\",\\n  \\"How do I return an item?\\",\\n  \\"What are your support hours?\\",\\n  \\"Do you ship internationally?\\"\\n];\\nonMount(async () => {\\n  const savedSessionId = localStorage.getItem(SESSION_STORAGE_KEY);\\n  if (savedSessionId) {\\n    sessionId = savedSessionId;\\n    try {\\n      const history = await fetchChatHistory(sessionId);\\n      messages = history;\\n    } catch (err) {\\n      console.error(\\"Failed to load history:\\", err);\\n      error = \\"Failed to load conversation history\\";\\n    }\\n  }\\n});\\nasync function handleSendMessage(text) {\\n  if (!text.trim()) return;\\n  const userMessage = {\\n    id: `user-${Date.now()}`,\\n    text: text.trim(),\\n    sender: \\"user\\",\\n    timestamp: Date.now()\\n  };\\n  messages = [...messages, userMessage];\\n  error = null;\\n  isLoading = true;\\n  try {\\n    const response = await sendChatMessage(\\n      text,\\n      sessionId || void 0\\n    );\\n    if (response.sessionId) {\\n      sessionId = response.sessionId;\\n      localStorage.setItem(SESSION_STORAGE_KEY, response.sessionId);\\n    }\\n    const aiMessage = {\\n      id: `ai-${Date.now()}`,\\n      text: response.reply,\\n      sender: \\"ai\\",\\n      timestamp: Date.now()\\n    };\\n    messages = [...messages, aiMessage];\\n  } catch (err) {\\n    console.error(\\"Failed to send message:\\", err);\\n    error = err instanceof Error ? err.message : \\"Failed to send message. Please try again.\\";\\n    const errorMessage = {\\n      id: `error-${Date.now()}`,\\n      text: error,\\n      sender: \\"ai\\",\\n      timestamp: Date.now()\\n    };\\n    messages = [...messages, errorMessage];\\n  } finally {\\n    isLoading = false;\\n  }\\n}\\nfunction startNewChat() {\\n  messages = [];\\n  sessionId = null;\\n  localStorage.removeItem(SESSION_STORAGE_KEY);\\n  showMenu = false;\\n}\\nfunction handleSuggestedQuestion(question) {\\n  handleSendMessage(question);\\n}\\n<\/script>\\r\\n\\r\\n<div class=\\"chat-container\\">\\r\\n  <div class=\\"chat-header\\">\\r\\n    <div class=\\"header-content\\">\\r\\n      <div class=\\"bot-info\\">\\r\\n        <div class=\\"bot-avatar\\">C</div>\\r\\n        <h1>Customer Support AI</h1>\\r\\n      </div>\\r\\n      <button class=\\"menu-button\\" on:click={() => (showMenu = !showMenu)}>\\r\\n        <svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\">\\r\\n          <circle cx=\\"12\\" cy=\\"5\\" r=\\"2\\" fill=\\"currentColor\\" />\\r\\n          <circle cx=\\"12\\" cy=\\"12\\" r=\\"2\\" fill=\\"currentColor\\" />\\r\\n          <circle cx=\\"12\\" cy=\\"19\\" r=\\"2\\" fill=\\"currentColor\\" />\\r\\n        </svg>\\r\\n      </button>\\r\\n    </div>\\r\\n    {#if showMenu}\\r\\n      <div class=\\"dropdown-menu\\">\\r\\n        <button on:click={startNewChat}>\\r\\n          <svg\\r\\n            width=\\"20\\"\\r\\n            height=\\"20\\"\\r\\n            viewBox=\\"0 0 24 24\\"\\r\\n            fill=\\"none\\"\\r\\n            stroke=\\"currentColor\\"\\r\\n          >\\r\\n            <path d=\\"M12 5v14M5 12h14\\" stroke-width=\\"2\\" />\\r\\n          </svg>\\r\\n          Start a new chat\\r\\n        </button>\\r\\n        <button\\r\\n          on:click={() => {\\r\\n            messages = [];\\r\\n            showMenu = false;\\r\\n          }}\\r\\n        >\\r\\n          <svg\\r\\n            width=\\"20\\"\\r\\n            height=\\"20\\"\\r\\n            viewBox=\\"0 0 24 24\\"\\r\\n            fill=\\"none\\"\\r\\n            stroke=\\"currentColor\\"\\r\\n          >\\r\\n            <path d=\\"M18 6L6 18M6 6l12 12\\" stroke-width=\\"2\\" />\\r\\n          </svg>\\r\\n          Clear chat\\r\\n        </button>\\r\\n      </div>\\r\\n    {/if}\\r\\n  </div>\\r\\n\\r\\n  <MessageList {messages} on:regenerate={(e) => handleSendMessage(e.detail)} />\\r\\n\\r\\n  {#if messages.length === 0}\\r\\n    <div class=\\"welcome-message\\">\\r\\n      <div class=\\"bot-avatar-large\\">C</div>\\r\\n      <h2>Hi! I\'m your Customer Support Assistant ðŸ‘‹</h2>\\r\\n      <p>Ask me anything about our products and services!</p>\\r\\n    </div>\\r\\n  {/if}\\r\\n\\r\\n  {#if isLoading}\\r\\n    <TypingIndicator />\\r\\n  {/if}\\r\\n\\r\\n  {#if messages.length === 0}\\r\\n    <div class=\\"suggested-questions\\">\\r\\n      {#each suggestedQuestions as question}\\r\\n        <button\\r\\n          class=\\"suggested-chip\\"\\r\\n          on:click={() => handleSuggestedQuestion(question)}\\r\\n        >\\r\\n          {question}\\r\\n        </button>\\r\\n      {/each}\\r\\n    </div>\\r\\n  {/if}\\r\\n\\r\\n  <ChatInput\\r\\n    on:send={(e) => handleSendMessage(e.detail)}\\r\\n    disabled={isLoading}\\r\\n    {CHARACTER_LIMIT}\\r\\n  />\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n  :global(body) {\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n    overflow: hidden;\\r\\n  }\\r\\n\\r\\n  :global(html) {\\r\\n    height: 100%;\\r\\n  }\\r\\n\\r\\n  :global(#svelte) {\\r\\n    height: 100%;\\r\\n  }\\r\\n</style>\\r\\n"],"names":[],"mappings":"AA0KU,IAAM,CACZ,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,QAAQ,CAAE,MACZ,CAEQ,IAAM,CACZ,MAAM,CAAE,IACV,CAEQ,OAAS,CACf,MAAM,CAAE,IACV"}'
};
const CHARACTER_LIMIT = 1e3;
const ChatContainer = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let messages = [];
  let isLoading = false;
  const suggestedQuestions = [
    "What are your shipping options?",
    "How do I return an item?",
    "What are your support hours?",
    "Do you ship internationally?"
  ];
  $$result.css.add(css);
  return `<div class="chat-container"><div class="chat-header"><div class="header-content"><div class="bot-info" data-svelte-h="svelte-1tj8rrj"><div class="bot-avatar">C</div> <h1>Customer Support AI</h1></div> <button class="menu-button" data-svelte-h="svelte-1e9myp3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="5" r="2" fill="currentColor"></circle><circle cx="12" cy="12" r="2" fill="currentColor"></circle><circle cx="12" cy="19" r="2" fill="currentColor"></circle></svg></button></div> ${``}</div> ${validate_component(MessageList, "MessageList").$$render($$result, { messages }, {}, {})} ${messages.length === 0 ? `<div class="welcome-message" data-svelte-h="svelte-12jjavk"><div class="bot-avatar-large">C</div> <h2>Hi! I&#39;m your Customer Support Assistant ðŸ‘‹</h2> <p>Ask me anything about our products and services!</p></div>` : ``} ${``} ${messages.length === 0 ? `<div class="suggested-questions">${each(suggestedQuestions, (question) => {
    return `<button class="suggested-chip">${escape(question)} </button>`;
  })}</div>` : ``} ${validate_component(ChatInput, "ChatInput").$$render($$result, { disabled: isLoading, CHARACTER_LIMIT }, {}, {})} </div>`;
});
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  return `${$$result.head += `<!-- HEAD_svelte-165eudy_START -->${$$result.title = `<title>AI Customer Support Chat</title>`, ""}<!-- HEAD_svelte-165eudy_END -->`, ""} ${validate_component(ChatContainer, "ChatContainer").$$render($$result, {}, {}, {})}`;
});
export {
  Page as default
};
